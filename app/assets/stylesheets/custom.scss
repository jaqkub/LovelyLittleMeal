// Global height styles for full-viewport layouts
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; // Prevent body scroll
}

// Ensure main content area can use flexbox properly
#main-content {
  display: flex;
  flex-direction: column;
}

// Hide default Turbo progress bar (we use custom loading indicator in chat)
.turbo-progress-bar {
  display: none !important;
}

// Chat message bubbles styling
.message-item {
  // Animation for slide-up and fade-in
  animation: slideUpFadeIn 0.3s ease-out;
  opacity: 0;
  animation-fill-mode: forwards;
}

@keyframes slideUpFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInFromRight {
  // Simple slide in from right to left
  from {
    opacity: 0;
    transform: translateX(50px); // Start from right
  }
  to {
    opacity: 1;
    transform: translateX(0); // Slide to normal position
  }
}

.message-bubble {
  max-width: 75%;
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  word-wrap: break-word;
  
  p {
    margin-bottom: 0.5rem;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

// User messages (right side) - darker grey using primary color
.user-message {
  background-color: #272727; // Primary dark grey
  color: #ffffff; // White text for contrast
  border-bottom-right-radius: 0.25rem;
}

// Assistant messages (left side) - light grey
.assistant-message {
  background-color: #f5f5f5; // Light grey
  color: #424242; // Dark grey text
  border-bottom-left-radius: 0.25rem;
}

// Message form styling - ensure input and button are same height
#message-form {
  form {
    align-items: stretch;
  }
  
  #message-content {
    height: auto;
    min-height: 38px; // Match Bootstrap button height
    border-radius: 12px; // Match container roundedness
    border: 1px solid #dee2e6;
    padding: 0.5rem 1rem;
    
    &:focus {
      border-color: #272727; // Primary color
      box-shadow: 0 0 0 0.2rem rgba(39, 39, 39, 0.25); // #272727 with 25% opacity
    }
  }
  
  .btn {
    height: 38px; // Match input height
    padding: 0.375rem 1.5rem;
    border-radius: 12px; // Match container roundedness
  }
}

// Reusable rounded button style for app-wide use
.btn-rounded {
  border-radius: 12px !important;
  padding: 0.375rem 1.5rem;
}

// Empty chat message - smooth fade out
#empty-chat-message {
  transition: opacity 0.2s ease-out, min-height 0.2s ease-out;
  opacity: 1;
  
  &[style*="display: none"] {
    display: none !important;
  }
}

// Loading indicator - smooth fade in/out
#chat-loading {
  min-height: 40px; // Fixed height to prevent layout shifts
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0; // Start hidden, will fade in via JS
  
  &.d-none {
    min-height: 0;
    height: 0;
    overflow: hidden;
    padding: 0;
    margin: 0;
  }
  
  &:not(.d-none) {
    opacity: 1;
    transition: opacity 0.2s ease-in;
  }
}

// Recipe details styling
#recipe-details {
  // Simple animation: slide in from right to left when recipe updates
  // Only animate if recipe has actual content (has-content class)
  &.has-content {
    animation: slideInFromRight 1s ease-out;
  }
  
  // Ensure the container can scroll
  overflow-y: auto;
  overflow-x: hidden;
  
  // Custom scrollbar styling for Firefox
  scrollbar-width: thin;
  scrollbar-color: rgba(39, 39, 39, 0.25) #ffffff; // Match input focus glow color
  
  // Custom scrollbar styling for Webkit browsers (Chrome, Safari, Edge)
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: #ffffff;
    border-radius: 4px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: rgba(39, 39, 39, 0.25); // Match input focus glow color (#272727 with 25% opacity)
    border-radius: 4px;
    
    &:hover {
      background: rgba(39, 39, 39, 0.4); // Slightly darker on hover
    }
  }
  
  // Add padding to prevent content from being squashed by borders
  padding-right: 0.5rem;
  padding-left: 0.25rem;
  
  h1 {
    font-size: 2rem;
    font-weight: 600;
    color: #212529;
  }
  
  h3 {
    font-weight: 600;
    color: #495057;
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 0.5rem;
  }
  
  // Ingredients list styling
  ul.list-unstyled {
    li {
      padding-left: 0.5rem;
      line-height: 1.6;
    }
  }
  
  // Instructions list styling
  ol {
    // Add proper padding to prevent numbers from being cut off
    padding-left: 1.5rem;
    margin-left: 0;
    
    li {
      line-height: 1.8;
      padding-left: 0.5rem;
      margin-left: 0;
      
      p {
        margin-bottom: 0.5rem;
        
        &:last-child {
          margin-bottom: 0;
        }
      }
    }
  }
  
  // Shopping list styling
  .bg-light {
    background-color: #f8f9fa !important;
    border-left: 3px solid #272727; // Primary color
  }
}

// Chat messages scrollbar styling
#chat-messages {
  // Ensure scrolling works properly even with justify-content: flex-end
  // When content is short, it's pushed to bottom; when it overflows, scrolling works
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  
  // Custom scrollbar styling for Firefox
  scrollbar-width: thin;
  scrollbar-color: rgba(39, 39, 39, 0.25) #ffffff; // Match input focus glow color
  
  // Custom scrollbar styling for Webkit browsers (Chrome, Safari, Edge)
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: #ffffff;
    border-radius: 4px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: rgba(39, 39, 39, 0.25); // Match input focus glow color (#272727 with 25% opacity)
    border-radius: 4px;
    
    &:hover {
      background: rgba(39, 39, 39, 0.4); // Slightly darker on hover
    }
  }
}

