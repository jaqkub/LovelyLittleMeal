// Chat component styles
// Styles for chat interface, messages, and message bubbles

// Chat message bubbles styling
.message-item {
  // Animation for slide-up and fade-in
  animation: slideUpFadeIn 0.3s ease-out;
  opacity: 0;
  animation-fill-mode: forwards;
}

.message-bubble {
  max-width: 75%;
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  word-wrap: break-word;
  
  p {
    margin-bottom: 0.5rem;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

// User messages (right side) - darker grey using primary color
.user-message {
  background-color: #272727; // Primary dark grey
  color: #ffffff; // White text for contrast
  border-bottom-right-radius: 0.25rem;
}

// Assistant messages (left side) - light grey
.assistant-message {
  background-color: #f5f5f5; // Light grey
  color: #424242; // Dark grey text
  border-bottom-left-radius: 0.25rem;
}

// Message form styling - ensure input and button are same height
#message-form {
  form {
    align-items: stretch;
  }
  
  #message-content {
    height: auto;
    min-height: 38px; // Match Bootstrap button height
    border-radius: 12px; // Match container roundedness
    border: 1px solid #dee2e6;
    padding: 0.5rem 1rem;
    
    &:focus {
      border-color: #272727; // Primary color
      box-shadow: 0 0 0 0.2rem rgba(39, 39, 39, 0.25); // #272727 with 25% opacity
    }
  }
  
  .btn {
    height: 38px; // Match input height
    padding: 0.375rem 1.5rem;
    border-radius: 12px; // Match container roundedness
  }
}

// Chat messages scrollbar styling
#chat-messages {
  // Flexbox container for messages
  // Spacer div (#messages-spacer) pushes messages to bottom when content is short
  // When content overflows, spacer shrinks and scrolling works normally
  // This approach avoids justify-content: flex-end which interferes with scrolling
  display: flex;
  flex-direction: column;
  
  // Enable scrolling - critical for scroll functionality
  overflow-y: auto;
  overflow-x: hidden;
  
  // Ensure smooth scrolling on mobile devices
  -webkit-overflow-scrolling: touch;
  
  // Hide scrollbar for Firefox while keeping scrolling functional
  scrollbar-width: none;
  
  // Hide scrollbar for Webkit browsers (Chrome, Safari, Edge) while keeping scrolling functional
  // Using width: 0 instead of display: none to ensure scrolling still works
  &::-webkit-scrollbar {
    width: 0;
    height: 0;
    background: transparent;
  }
  
  // Ensure scrolling still works on all browsers
  -ms-overflow-style: none;
}

// Chat container - control height split on mobile
.chat-container {
  // On mobile, take 30% of available space using flex-basis
  // flex: 0 1 30% means: don't grow, can shrink, 30% basis
  @media (max-width: 991.98px) {
    flex: 0 1 35% !important; // 30% of parent height, can shrink if needed
    min-height: 0; // Allow shrinking
    overflow: hidden; // Prevent outer scrollbar - inner #chat-messages handles scrolling
    min-width: 100% !important; // Full width on mobile
    width: 100% !important;
    max-width: 100% !important;
  }
}

// Empty chat message - smooth fade out
#empty-chat-message {
  transition: opacity 0.2s ease-out, min-height 0.2s ease-out;
  opacity: 1;
  
  &[style*="display: none"] {
    display: none !important;
  }
}

// Loading indicator - smooth fade in/out
#chat-loading {
  min-height: 40px; // Fixed height to prevent layout shifts
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0; // Start hidden, will fade in via JS
  
  &.d-none {
    min-height: 0;
    height: 0;
    overflow: hidden;
    padding: 0;
    margin: 0;
  }
  
  &:not(.d-none) {
    opacity: 1;
    transition: opacity 0.2s ease-in;
  }
}

