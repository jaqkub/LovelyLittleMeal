<nav id="navbar" class="navbar navbar-expand-lg bg-white position-relative overflow-hidden px-4 pt-4">
  <div class="container-fluid d-flex align-items-center justify-content-end">

    <!-- Just to push nav items and hamburger button to the right -->
    <div class="navbar-brand"></div>

    <!-- Hamburger (mobile only) - hidden during wizard -->
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNav" style="<%= 'visibility: hidden; pointer-events: none;' if controller_name == 'wizard' %>">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Desktop links – visible only ≥lg -->
    <!-- Hide navigation during wizard -->
    <div class="d-none d-lg-block">
      <ul class="navbar-nav d-flex align-items-center <%= 'hidden-preserve-space' unless user_signed_in? || controller_name == 'wizard' %>" style="<%= 'visibility: hidden; pointer-events: none;' if controller_name == 'wizard' %>">
        <%= render "shared/navbar_items" %>
      </ul>
    </div>

  </div>

  <!-- Logo – clickable and goes to root (disabled during wizard) -->
  <% if controller_name == 'wizard' %>
    <!-- Logo without link during wizard -->
    <div class="position-absolute top-50 start-50 translate-middle" style="pointer-events: none; z-index: 0;">
      <%= image_tag(
            "https://res.cloudinary.com/dao1vxhsu/image/upload/v1764934638/logo_no_background_aszsab.png",
            alt: "LovelyLittleMeal",
            class: "navbar-logo"
          ) %>
    </div>
  <% else %>
    <%= link_to root_path,
          class: "position-absolute top-50 start-50 translate-middle",
          style: "pointer-events: auto; z-index: 0; text-decoration: none;",
          data: { turbo_prefetch: false } do %>
      <%= image_tag(
            "https://res.cloudinary.com/dao1vxhsu/image/upload/v1764934638/logo_no_background_aszsab.png",
            alt: "LovelyLittleMeal",
            class: "navbar-logo"
          ) %>
    <% end %>
  <% end %>

</nav>

<!-- Offcanvas drawer (mobile only) -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNav">
  <div class="offcanvas-header">
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="navbar-nav text-end <%= 'hidden-preserve-space' unless user_signed_in? || controller_name == 'wizard' %>" style="<%= 'visibility: hidden; pointer-events: none;' if controller_name == 'wizard' %>">
      <%= render "shared/navbar_items" %>
    </ul>
  </div>
</div>
