<% left_content = capture do %>
  <h2 class="mb-3">Your saved recipes</h2>
  <div class="overflow-y-auto flex-grow-1" style="min-height: 0; max-height: 100%;">
    <% if @recipes.any? %>
      <% @recipes.each do |recipe| %>
        <div class="recipe-card mb-3 pb-3 border-bottom d-flex justify-content-between align-items-start">

          <!-- LEFT SIDE: Title + Description + Date -->
          <div class="flex-grow-1">
            <%= link_to recipe_path(recipe), class: "text-decoration-none text-dark", data: { turbo_prefetch: false } do %>
              <h3 class="h5 mb-1"><%= recipe.title || "Untitled Recipe" %></h3>

              <% if recipe.description.present? && recipe.description != "Nothing here yet..." %>
                <p class="text-muted mb-1"><%= recipe.description %></p>
              <% end %>

              <p class="text-muted small mb-0">Created: <%= recipe.created_at.strftime("%B %d, %Y") %></p>
            <% end %>
          </div>

          <!-- RIGHT SIDE: Favorite star + Delete button -->
          <div class="d-flex align-items-center gap-2">

            <span id="favorite-toggle-<%= recipe.id %>">
              <%= button_to toggle_favorite_recipe_path(recipe),
                            method: :patch,
                            class: "favorite-button",
                            form_class: "d-inline" do %>
                <%= recipe.favorite? ? "â˜…" : "â˜†" %>
              <% end %>
            </span>

            <%= button_to recipe_path(recipe),
              method: :delete,
              data: { turbo_confirm: "Delete this recipe?" },
              class: "delete-icon-button",
              form_class: "d-inline" do %>
              ğŸ—‘ï¸
            <% end %>

          </div>

        </div>
      <% end %>
    <% else %>
      <div class="d-flex align-items-center justify-content-center flex-grow-1">
        <p class="text-muted mb-0">You don't have any recipes yet.</p>
      </div>
    <% end %>
  </div>
<% end %>

<% right_content = capture do %>
  <div class="d-flex align-items-center justify-content-center flex-grow-1">
    <%= link_to "New Recipe", new_recipe_path,
        class: "btn btn-primary btn-lg",
        data: { turbo_prefetch: false },
        style: "padding: 1rem 2rem; font-size: 1.25rem;" %>
  </div>
<% end %>

<%= render "recipes/two_column_layout", left_content: left_content, right_content: right_content %>
